<div class="wide-event-card">
  <%= link_to event_path(event), class: "event-card-link" do %>
    <div class="card-content-flex">
      <div class="card-left">
        <div class="left-column"><i class="<%= EventsController::LOGOS[event.category] %>"></i>
        </div>
        <div class="middle-column">
          <div class="wide-event-card-title">
           <h4><%= event.name %></h4>
          </div>
          <p><%= event.date.strftime("%A %d %b") %> (<%= event.location %>)</p>
          <p><%= event.date.strftime("%H:%M") %></p>
        </div>
      </div>
      <div class="right-column">
        <% if event.requests.select { |request| request.status == "accepted"}.any? %>
          <h4>Event guests</h4>
          <% event.requests.select { |request| request.status == "accepted"}.each do |request| %>
            <p><%= request.user.name %></p>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
<% if @user == current_user %>
  <% event.requests.each do |request| %>
    <div class="request-card">
      <div class="card-content-flex">
        <div class="card-left">
          <div class="middle-column">
            <div class="request-title">
              <h4><strong>Request to join from </strong><%= request.user.name %>
              <span class="request-link-sm">
                <%= link_to user_path(request.user), target: "_blank" do%>
                  <i class="fas fa-long-arrow-alt-left"></i>
                  <span>More about this user</span>
                <% end %>
              </span>
              </h4>
             <p><strong>Message: </strong><%= request.message %></p>
            </div>
          </div>
        </div>
        <div class="request-right">
          <% if request.status == "pending" %>
            <%= link_to accept_request_path(request), id: "change-request-status", class: "request-confirm" do %>
              <i class="fas fa-check"></i>Confirm request
            <% end %>
            <%= link_to reject_request_path(request), id: "change-request-status", class: "request-reject" do %>
              <i class="fas fa-times"></i>Reject request
            <% end %>
          <% else %>
            <p>Request <%= request.status %></p>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
